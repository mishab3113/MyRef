# Plotting Trips vs covid cases --with dropdown option for changing the county
from plotly import tools
import plotly.graph_objs as go
states = sorted(set(travel_covid["county"]))
layout=dict(
 title='Total Trips vs Covid Cases', 
 width=1200, height=700, title_x=0.5,
 paper_bgcolor='#fff',
 plot_bgcolor="#fff",
 xaxis=dict(
     title='Date', 
     type='date', 
     tickformat='%Y-%m-%d',
     gridcolor='rgb(255,255,255)',
     zeroline= False,
 ),
 yaxis=dict(
     title='My Y-axis',
     zeroline= False
         )
     )
fig1=go.Figure(layout=layout)
fig1 = tools.make_subplots(rows=2, cols=1)
default_state = "Cape May"
region_plot_names = []
buttons=[]
for region_name in states:
    region = travel_covid[travel_covid["county"]==region_name]
    fig1.add_trace(go.Scatter(x=region["date"], y=region["trips_count"],name='trips', marker_color='#ef553b',visible=(region_name==default_state)),row=1, col=1)
    fig1.add_trace(go.Scatter(x=region["date"], y=region["daily_case"],name='covid_cases',marker_color='#00cc96',visible=(region_name==default_state)),row=2, col=1)
    region_plot_names.extend([region_name]*2)
for region_name in states:
    buttons.append(dict(method='update',
                        label=region_name,
                        args = [{'visible': [region_name==r for r in region_plot_names]}]))
# buttons.append(dict(method='update',label='All Counties',args=[{'visible': travel_covid[items].T.values}])
# Add dropdown menus to the figure
# Create layout for the plot
# Customize title
fig1.layout.title = 'Trips vs Covid Cases'

# Customize global font family
fig1.layout.font.family='Rockwell'

# Display as FigureWidget
fig1.update_layout(template="simple_white",showlegend=True, updatemenus=[{"buttons": buttons, "direction": "down", "showactive": True}])
fig1.show()
